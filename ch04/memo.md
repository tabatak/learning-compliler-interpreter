# 式の解析

## 4.1 式の表現
式の表現の種類
```
a + b  -> 中置記法
a b +  -> 後置記法
+ a b  -> 前置記法
```

## 4.2 演算子順位表による構文解析

### 逆ポーランド記法を使う式解析
演算子の強さの順序（演算子順位）に着目して、元式を後置記法に変換。

逆ポーランド記法で並べ替えると、()の処理や、優先順位のことを考える必要がなくなる。
->要素の出てきた順番に処理すれば答えが得られる。

1. 式の返還 -> 元の式を逆ポーランド記法で並べ替える（=中間言語にコンパイル）
2. 式の評価 -> 逆ポーランド記法になった式を評価して答えを得る（=コンパイルした結果を実行）

### 変換パターン
1. 変数（や定数）なら、そのまま出力する
2. 演算子なら、現在のスタックトップにある要素（最後に積んだもの）と、新しく読んだ要素を比較して適切な処理をする

### 式の評価
逆ポーランド記法で書かれた式の評価。

1. 先頭から見ていき、トークンがある間以下の処理を繰り返す
  ```
  要素が変数（や定数）なら、その値をPUSHする
  要素が演算子ならPOPした値をn2に、もう一度POPした値をn1に入れ、n1 演算子 n2 の計算を行い、結果をPUSHする
  ```
2. 最後にスタックに残った値（1個残るはず）をPOPして「結果」とする
 

